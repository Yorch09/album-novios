<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>√Ålbum por Misiones üíå</title>
  <style>
    body {
      font-family: sans-serif;
      background: #fefaf5;
      padding: 20px;
    }

    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }

    #pagina-tema {
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
      max-width: 1000px;
      margin: auto;
    }

    .card {
      perspective: 1000px;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 220px;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      backface-visibility: hidden;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      box-sizing: border-box;
      flex-direction: column;
      text-align: center;
    }

    .card-front {
      background: url('imgs/Fondo_carta.jpg') center/contain no-repeat, #ffecf0;
      font-weight: bold;
      font-size: 0.9em;
    }

    .card-back {
      background: white;
      transform: rotateY(180deg);
    }

    .card-back img {
      max-height: 100px;
      width: auto;
      object-fit: cover;
      border-radius: 8px;
      margin-top: 10px;
    }


    .card.locked .card-front {
      filter: grayscale(100%);
      cursor: not-allowed;
    }

    .card:not(.locked) .card-front {
      cursor: pointer;
    }

    input[type="file"] {
      margin-top: 10px;
    }

    button {
      margin-top: 10px;
      padding: 5px 10px;
      border: none;
      background: #ff4081;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background: #d81b60;
    }

    .navegacion {
      text-align: center;
      margin-top: 20px;
    }

    .navegacion button {
      margin: 0 10px;
      padding: 8px 15px;
      background: #007bff;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }

    .navegacion button:hover {
      background: #0056b3;
    }

    .info-icon {
      position: absolute;
      top: 6px;
      left: 6px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.8);
      padding: 2px 6px;
      border-radius: 50%;
      cursor: default;
      box-shadow: 0 0 2px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

<h1>√Ålbum de Misiones üíå</h1>
<div id="pagina-tema"></div>
<div class="grid" id="grid-misiones"></div>

<div class="navegacion">
  <button onclick="cambiarPagina(-1)">‚¨ÖÔ∏è Anterior</button>
  <span id="pagina-actual"></span>
  <button onclick="cambiarPagina(1)">Siguiente ‚û°Ô∏è</button>
</div>

<script>
  const album = [
    {
      tema: "Citas y momentos juntos üíñ",
      misiones: [
        { nombre: "Selfie con cara tonta", descripcion: "Tomad una selfie haciendo una cara tonta juntos", estado: "desbloqueada", imagen: null },
        { nombre: "Coraz√≥n con las manos", descripcion: "S√°cate una foto haciendo un coraz√≥n con la persona que amas", estado: "bloqueada", imagen: null },
        { nombre: "Brindis improvisado", descripcion: "Preparad un brindis con lo que teng√°is ‚Äì agua, zumo, lo que sea", estado: "bloqueada", imagen: null },
        { nombre: "Cena rom√°ntica casera", descripcion: "Cocinad junt@s algo especial", estado: "bloqueada", imagen: null },
        { nombre: "Juegos de mesa", descripcion: "Jugad a vuestro juego favorito o probad uno nuevo", estado: "bloqueada", imagen: null },
        { nombre: "Helado juntos", descripcion: "Comed un helado juntos y disfrutad del sabor", estado: "bloqueada", imagen: null },
        { nombre: "Cita en el cine", descripcion: "Disfrutad de una pel√≠cula rom√°ntica en el primer cine al que fuisteis", estado: "bloqueada", imagen: null },
        { nombre: "Picnic", descripcion: "Manta en el suelo, comida sencilla y conversaci√≥n", estado: "bloqueada", imagen: null },
        { nombre: "Desayuno en pareja", descripcion: "Disfrutad de un desayuno con caf√© ma√±anero", estado: "bloqueada", imagen: null },
        { nombre: "Paseo de la mano", descripcion: "Id a caminar por un parque o zona especial", estado: "bloqueada", imagen: null },
        { nombre: "Cine en casa", descripcion: "Elige peli, prepara snacks y disfrutad", estado: "bloqueada", imagen: null },
        { nombre: "Bailar en el sal√≥n", descripcion: "Apagad las luces, encended una vela y bailad", estado: "bloqueada", imagen: null },
        { nombre: "Spa casero", descripcion: "Masajes, mascarillas y mimo mutuo", estado: "bloqueada", imagen: null },
        { nombre: "Mirar las estrellas", descripcion: "Salid y contemplad el cielo real", estado: "bloqueada", imagen: null },
        { nombre: "Primera cita, hoy", descripcion: "Vestiros como en una primera cita", estado: "bloqueada", imagen: null }
      ]
    },
    {
      tema: "Aventuras üåç",
      misiones: [
        { nombre: "Paseo por el campo", descripcion: "Salid a caminar por un entorno natural cercano, sin prisa, solo disfrutando", estado: "desbloqueada", imagen: null },
        { nombre: "Visita la capital", descripcion: "Id juntos a la capital de vuestra provincia o comunidad y pasad el d√≠a all√≠", estado: "bloqueada", imagen: null },
        { nombre: "Monumento favorito", descripcion: "Buscad el monumento que m√°s os guste de vuestra ciudad y pasad un rato all√≠", estado: "bloqueada", imagen: null },
        { nombre: "Tarde en una cafeter√≠a", descripcion: "Elegid una cafeter√≠a tranquila y hablad de cualquier cosa sin mirar el reloj", estado: "bloqueada", imagen: null },
        { nombre: "Paseo por el centro", descripcion: "Caminad por las calles m√°s bonitas del centro, como si fuerais turistas", estado: "bloqueada", imagen: null },
        { nombre: "Tarde de librer√≠as", descripcion: "Visitad una librer√≠a o biblioteca, elegid un libro para el otro", estado: "bloqueada", imagen: null },
        { nombre: "Atardecer juntos", descripcion: "Buscad un lugar bonito para ver la puesta de sol abrazados", estado: "bloqueada", imagen: null },
        { nombre: "Rinc√≥n secreto", descripcion: "Ense√±adle al otro un lugar que os encante y que a√∫n no conozca", estado: "bloqueada", imagen: null },
        { nombre: "D√≠a de mercado", descripcion: "Visitad un mercado local o mercadillo y elegid algo para compartir", estado: "bloqueada", imagen: null },
        { nombre: "Escapada al barrio antiguo", descripcion: "Perdeos por las calles con m√°s historia y encanto de vuestra ciudad", estado: "bloqueada", imagen: null },
        { nombre: "Tomar algo en vuestro sitio de siempre", descripcion: "Id a ese bar, cafeter√≠a o rinc√≥n en el que sol√©is coincidir sin pensarlo mucho, y simplemente disfrutad del momento juntos.", estado: "bloqueada", imagen: null },
        { nombre: "Cita en un parque", descripcion: "Pasad la tarde en un parque simplemente estando, sin hacer nada m√°s", estado: "bloqueada", imagen: null },
        { nombre: "Museo o exposici√≥n", descripcion: "Visitad un museo o muestra cultural, aunque no teng√°is ni idea del tema", estado: "bloqueada", imagen: null },
        { nombre: "Mirador o azotea", descripcion: "Subid a un lugar con vistas de la ciudad y quedaos all√≠ un rato", estado: "bloqueada", imagen: null },
        { nombre: "Caminar bajo la lluvia", descripcion: "Si un d√≠a llueve, salid a pasear juntos sin paraguas, solo por el momento", estado: "bloqueada", imagen: null }
      ]
    },
    {
      tema: "Detalles ‚ú®",
      misiones: Array.from({ length: 15 }, (_, i) => ({
        nombre: `Detalle ${i + 1}`,
        estado: i === 0 ? "desbloqueada" : "bloqueada",
        imagen: null,
        descripcion: `Un peque√±o detalle que signifique mucho, momento ${i + 1}.`
      }))
    },
    {
      tema: "Celebraciones üéâ",
      misiones: Array.from({ length: 15 }, (_, i) => ({
        nombre: `Fiesta ${i + 1}`,
        estado: i === 0 ? "desbloqueada" : "bloqueada",
        imagen: null,
        descripcion: `Una celebraci√≥n o evento especial n√∫mero ${i + 1}.`
      }))
    },
    {
      tema: "Nuestros Momentos üíñ",
      misiones: Array.from({ length: 15 }, (_, i) => ({
        nombre: `Momento ${i + 1}`,
        estado: i === 0 ? "desbloqueada" : "bloqueada",
        imagen: null,
        descripcion: `Un momento inolvidable que compartimos. #${i + 1}`
      }))
    }
  ];

  let paginaActual = 0;

  function renderizarAlbum() {
    const seccion = album[paginaActual];
    document.getElementById('pagina-tema').textContent = `Tema: ${seccion.tema}`;
    document.getElementById('pagina-actual').textContent = `P√°gina ${paginaActual + 1} / ${album.length}`;
    renderizarMisiones(seccion.misiones);
  }

  function cambiarPagina(delta) {
    if (paginaActual + delta >= 0 && paginaActual + delta < album.length) {
      paginaActual += delta;
      renderizarAlbum();
    }
  }

  function renderizarMisiones(misiones) {
    const grid = document.getElementById('grid-misiones');
    grid.innerHTML = '';

    misiones.forEach((mision, index) => {
      const card = document.createElement('div');
      card.className = 'card';
      if (mision.estado === 'bloqueada') card.classList.add('locked');
      if (mision.estado === 'completada') card.classList.add('flipped');

      const inner = document.createElement('div');
      inner.className = 'card-inner';

      const front = document.createElement('div');
      front.className = 'card-front';
      front.innerHTML = `<div>${mision.nombre}</div>`;

      // Info icon
      const infoIcon = document.createElement('div');
      infoIcon.className = 'info-icon';
      infoIcon.title = mision.descripcion || "Sin descripci√≥n";
      infoIcon.textContent = "‚ÑπÔ∏è";
      front.appendChild(infoIcon);

      const back = document.createElement('div');
      back.className = 'card-back';

      const titulo = document.createElement('h4');
      titulo.textContent = mision.nombre;
      back.appendChild(titulo);

      if (mision.estado === 'completada' && mision.imagen) {
        const img = document.createElement('img');
        img.src = mision.imagen;
        back.appendChild(img);
      } else if (mision.estado === 'desbloqueada') {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*';

        const btn = document.createElement('button');
        btn.textContent = 'Subir foto';
        btn.onclick = () => {
          const file = input.files[0];
          if (!file) return alert('Selecciona una imagen');

          const reader = new FileReader();
          reader.onload = () => {
            mision.imagen = reader.result;
            mision.estado = 'completada';

            if (index + 1 < misiones.length && misiones[index + 1].estado === 'bloqueada') {
              misiones[index + 1].estado = 'desbloqueada';
            }
            renderizarAlbum();
          };
          reader.readAsDataURL(file);
        };

        back.appendChild(input);
        back.appendChild(btn);
      }

      inner.appendChild(front);
      inner.appendChild(back);
      card.appendChild(inner);
      grid.appendChild(card);

      if (mision.estado !== 'bloqueada') {
        card.addEventListener('click', (e) => {
          if (e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
          card.classList.toggle('flipped');
        });
      }
    });
  }

  renderizarAlbum();
</script>

</body>
</html>
